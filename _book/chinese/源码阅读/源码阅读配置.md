# 源码阅读

## androidstudio 查看自带的sdk中的源码
```text
1、在 Androidstudio中点击自己的代码想往下查看源码时，
throw new RuntimeException("Stub!"
这是因为没有匹配到对应版本的源码，此时按提示下载源码即可。

2、有一些源码被加了 @hide标签，从 Androidstudio中看不到，
可以从 https://github.com/anggrayudi/android-hidden-api 下载对应版本的 android.jar 替换掉。

3、替换掉 android.jar 后，Androidstudio 报错 
ERROR: Execution failed for MockableJarTransform 
这是 com.android.tools.build:gradle:x.x.x 版本的问题, 高版本的 gradle中加了一些校验机制，
https://github.com/anggrayudi/android-hidden-api/issues/46

4、最终配置
compileSdkVersion 27
targetSdkVersion 27
classpath 'com.android.tools.build:gradle:3.1.4'
```

## Androidstudio查看整个Android系统的源码
只能阅读，不能编译。
```text
这里给出 android-8.1.0_r1 版本的源码。
源码地址 https://gitee.com/hnyer/android-8.1.0_r1_learning

1、下载好源码解压，此时导入Androidstudio 只能查看，不能点击跳转。
2、将 android.iml 、android.ipr 两个文件放到根目录。此时可能仍然不能跳转。
3、进入 project Structure --> Modules ，将所有文件都设置成 sources 选项。

4、如果查看源码的时候展示的是 xxx.class ，连接的是 android.jar ，
你将连接指向 F:\sdk2\sources\android-29 即可(举例)。
```