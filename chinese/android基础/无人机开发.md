# 大疆DJI无人机二次开发

## 大疆开发者官网SDK类型
```text
1、Moblie SDK
支持二次开发的逻辑封装。可以基于mobile SDK 开发自定义风格的APP。
Android MSDK V5.x  主要支持工业级无人机
Android MSDK V4.x  主要支持消费级无人机

2、UX SDK
对逻辑+UI 进行封装，形成一个一个独立功能的组件。
基于 UX SDK 可以直接使用其内置的组件，如果要改变UI风格，可以对其源码进行修改。

不过到目前为止(20240420)V5版本的 UX SDK 还是处于一个半成品。
有不少BUG，很多组件都还没封装完成。

3、Windows SDK
支持自定义的 PC端 （Windows ）应用程序。 Android端开发无需关注。
```

MSDK V4和V5版本互不兼容，二次开发时，不能同时使用V4 和V5 进行开发，只能选其一。否则会发生冲突。
每个版本对应支持的机型，SDK对应的文档中都有说明的。


## DJI无人机支持的飞行控制方式
```text
1、手动飞行
用户可以使用遥控器对飞机进行控制。

2、程序控制飞行
可以调用 MSDK API 实现航线飞行和 虚拟摇杆控制飞行。

4、手势控制
某些飞机（例如Spark）会根据用户的手势执行基本的飞行操作。
```

## 专业术语
```text
1、智能飞行助手
其实就是SDK中的一个程序模块。
Mobile SDK提供了智能飞行助手，可以访问避障和定位视觉系统的状态信息。
另外，警告和距离信息也将提供给开发者们用于躲避障碍物。

2、虚拟摇杆
SDK提供的一套API，用来控制飞机。
虚拟摇杆功能可以模拟遥控器的操纵杆，可以模拟手动飞行的方式进行自动飞行。 
与航线任务相比，这是一种更为复杂但灵活的自动飞行方法。


3、Airlink
AirLink描述了飞机，遥控器，手持相机和移动设备之间的无线链接。
①、WiFi
②、OcuSync （DJI新开发的OcuSync传输系统是Lightbridge系列的一部分，在所有传输速度下，其性能远胜于Wi-Fi传输。）
③、Lightbridge （DJI开发了Lightbridge，专门用于2.4 GHz频段的远程，强大的空中通信，并被用作遥控器和飞机之间的链接。 
   与WiFi相比，它提供的覆盖范围更大，某些产品的通信距离可达5公里。）
④、Auxiliary

4、配件 Lightbridge Accessory 
大疆拥有独立的配件产品 Lightbridge 2 ，可以集成到诸如 S1000。 
该产品的目的是将遥控命令中继到飞机，并将遥测和视频数据中继到遥控器。
该配件在实时视频流中提供了两个附加功能：
①、飞机上的多个视频输入可以合并为画中画实时视频流
②、屏幕显示（OSD）模式将飞机的姿态信息叠加到实时视频流上

5、对频连接
遥控器如果已经连接到某个飞机，如果需要与其他飞机一起使用，则需要重新对频。
要进行对频，必须将遥控器置于对频模式（通过DJI 官方APP或Mobile SDK API）。 
遥控器将开始发出哔哔声，并且其状态LED指示灯将闪烁蓝色。 然后需要按下飞机上的对频按钮以完成对频过程。 
```


## 大疆SDK支持的智能任务
注意：不是所有的机型都支持，也不是一款机型支持所有的。
```text
1、航点任务
航点任务是通过向无人机发送一系列预定义的位置点，无人机会自动飞往这些航点。可以在每个航点上执行一系列动作（例如拍照）。
在执行任务期间，可以使用遥控器摇杆手动调整任务。 可以加快，降低速度，甚至反向执行任务。
受飞行控制器中的存储量限制。 因此，每个任务只能执行99个航路点。

2、热点任务
飞机将按照恒定半径围绕指定点（称为热点）飞行。任务期间，可以使用遥控器摇杆手动调节高度，航向和半径。

3、Follow Me 任务
飞机将跟踪GPS坐标，该坐标按照一定的间隔和固定的高度持续发送到飞机上。
如果超过6秒钟未收到新的GPS坐标，则飞机将悬停在原位。

4、智能跟随任务
飞机使用视觉系统跟踪运动中的物体，而无需在物体上安装GPS跟踪器。
用户在实时视频视图上定义一个矩形，该矩形定义了要跟踪的目标。
如果跟随算法丢失目标，飞机将悬停并要求再次确认目标。
智能任务有以下三种模式：
①、跟随模式：飞机以恒定的距离跟随在目标的后面或前面。
②、平行跟随模式：飞机与目标平行移动而不是向前或者向后移动。
③、焦点模式：飞机的摄像头将自动跟随目标，但是飞机不会自动与主体保持恒定的距离。可以使用遥控器控制飞机在被跟踪目标周围移动。

5、TapFly 任务（指点飞行 ，指点跟随）
可以使飞机沿着用户选择的实时视频流上的某个点的方向飞行。只有某些具有视觉系统的飞机才支持TapFly任务。 

6、全景任务
全景任务会在拍摄照片时将相机旋转180或360度，然后可以将其下载下来用于渲染全景照片。 
在完成任务之前，无法将其他命令发送到相机。 
目前全景任务不支持图像拼接功能，因此必须手动拼接图像。
```
