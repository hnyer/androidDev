# 进程通信 、 多进程通信 、 进程间通信


#### 多进程的使用场景
1、将核心模块跑在一个进程中， 降低被系统kill的概率。

2、android系统的内存限制是针对进程的，多开几个进程 可以获得更多的内存。

3、模块化开发，子进程中崩溃并不会导致主进程崩溃。提高程序的健壮性 。

4、需要调用其他应用提供的数据。

---

### 相关术语

#### RPC
Remote Procedure Call Protocol， 远程过程调用协议 。


#### IPC
inter process communication ，多进程通信的过程。

#### oom_adj
对于每一类别的进程会有其oom_adj值的取值范围。在系统执行低杀操作时，会从oom_adj值越高的开始杀。


#### AIDL 和binder的关系
Binder是一种架构(定义了一种通信机制)，这种架构提供了服务端接口、Binder驱动、客户端接口三个模块。
Binder使用Client-Server通信方式，安全性好，简单高效，再加上其面向对象的设计思想，独特的接收缓存管理和线程池管理方式，成为Android进程间通信的中流砥柱。
？？？？？？


#### Binder  
~~~public class Binder implements IBinder 。~~~
一种用来实现进程间通信的架构。

Binder不是Android提出来的一套新的进程间通信机制，它是基于OpenBinder实现的。







&nbsp;&nbsp;
&nbsp;&nbsp;

#### 进程级别
1、 前台进程

2、可见进程

3、服务进程

4、后台进程

5、空进程

#### 进程间通信的注意点
1、jvm不同，内存空间独立。 会导致一些常规的特效失效。

2、传递的信息要么是 基本数据类型 ，要么就必须能被序列化 。



#### android 进程间通信方案  
1、 Intent +  Bundle
同一个app中的 不同进程 单向通信 。 一般用于四大组件中。

2、socket

socket都可以实现网络通信，那么实现跨进程通信自然是ok的。开销大。

3、通过文件

不同的进程通过对同一个文件进行读写来实现信息交互。

4、ContentProvider

基于 Binder的 ContentProvider 可以让 一个应用向其他应用暴露接口，提供数据。

5、BroadcastReceiver

通过广播播放实现单方面通知。

6、android.os.Messenger
基于AIDL。串行通信。
一个 server 运行在一个 apk  中 ， 另一个apk 绑定服务，发送和接收信息。

7、AIDL

支持并发 交互。

当作为客户的一方和要和作为服务器的一方进行通信时，需要指定一些双方都认可的接口， 这样才能顺利地进行通信。

而AIDL就是定义这些接口的一种工具。为什么要借助AIDL来定义，而不直接编写接口呢（比如直接通过Java定义一个Interface）？
里涉及到进程间通信（IPC）的问题。和大多数系统一样，在Android平台下,各个进程都占有一块自己独有的内存空间，各个进程在通常情况下只能访问自己的独有的内存空间，而不能对别的进程的内存空间进行访问。 进程之间如果要进行通信，就必须先把需要传递的对象分解成操作系统能够理解的基本类型，并根据你的需要封装跨边界的对象。而要完成这些封装工作，需要写的代码量十分地冗长而枯燥。因此Android提供了AIDL来帮助你完成这些工作。

---
